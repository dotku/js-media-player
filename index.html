<HTML>
  <head>
    <title>JS Online Media Player</title>
    <link rel="stylesheet" 
          href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" 
          integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" 
          crossorigin="anonymous">
    <style>

</style>
  </head>
  <body class="container">
    <div class="card">
      <video id="video" controls autoplay width="100%"></video>
      <div class="card-body">
        <h5 class="card-title">JS Media Player</h5>
        <p class="card-text">I realized that it would be faster to load file directly from web than download it to the local, 
          so here is the project.</p>
        <div>
          <label>Buffer</label>
          <div class="progress buffered">
          <div class="progress-bar" id="buffered-amount" role="progressbar" aria-valuemax="100"></div>
        </div>
        <div>
          <label>Counter</label>
          <span id="counter" />
        </div>
        <a href="#https://docs.evostream.com/sample_content/assets/bunny.mp4" target="_blank">#https://docs.evostream.com/sample_content/assets/bunny.mp4</a>
      </div>
    </div>
  </body>
  
<script>
let video = document.querySelector('#video');
let url = location.hash.substring(location.hash.indexOf('#') + 1);
video.src = url;

let time = 0;
setInterval(() => {
  time++;
  document.querySelector('#counter').innerHTML = time;
}, 1000)

video.onprogress = (e) => {
  if (video.buffered.length) {
    var bufferedEnd = video.buffered.end(video.buffered.length - 1);
    var duration =  video.duration;
      console.log('bufferedEnd', bufferedEnd)
    console.log('duration', duration)
      if (duration > 0) {
        document.getElementById('buffered-amount').style.width = ((bufferedEnd / duration)*100) + "%";
    }
  }
}
      </script>
</html>

